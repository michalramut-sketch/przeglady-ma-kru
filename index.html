<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MA-KRU â€“ PrzeglÄ…dy</title>

<style>
body{
  font-family: Arial, sans-serif;
  margin:0;
  background:#f4f6f8;
}
header{
  background:#1f2937;
  color:#fff;
  padding:15px;
  text-align:center;
  font-size:20px;
}
#content{
  padding:15px;
}

/* kafelki */
.tiles{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
}
.tile{
  background:#fff;
  border-radius:10px;
  padding:20px;
  text-align:center;
  font-weight:bold;
  box-shadow:0 2px 5px rgba(0,0,0,.1);
  cursor:pointer;
}
.tile:hover{
  background:#e5e7eb;
}

/* lista */
.card{
  background:#fff;
  padding:12px;
  border-radius:8px;
  margin-bottom:10px;
  box-shadow:0 1px 3px rgba(0,0,0,.1);
}
.btn{
  margin-top:10px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.btn-main{ background:#2563eb;color:#fff;}
.btn-back{ background:#9ca3af;color:#fff;}
</style>
</head>

<body>

<header>MA-KRU â€“ PrzeglÄ…dy techniczne</header>
<div id="content"></div>

<script>
/* ======================
   BAZA (LOCAL STORAGE)
====================== */
let buildings = JSON.parse(localStorage.getItem("buildings")) || [
  {id:1, adres:"Armii Krajowej 2", zarzadca:"TBS", historia:[]},
  {id:2, adres:"KoÅ›ciuszki 10", zarzadca:"WspÃ³lnota", historia:[]}
];

function saveData(){
  localStorage.setItem("buildings", JSON.stringify(buildings));
}

/* ======================
   PANEL GÅÃ“WNY
====================== */
function showHome(){
  content.innerHTML = `
    <div class="tiles">
      <div class="tile" onclick="showBuildings()">ğŸ¢ Budynki</div>
      <div class="tile" onclick="newInspection()">ğŸ—ï¸ PrzeglÄ…d budowlany</div>
      <div class="tile">ğŸ”¥ Gazowy (wkrÃ³tce)</div>
      <div class="tile">âš¡ Elektryczny (wkrÃ³tce)</div>
      <div class="tile">âš™ï¸ Inne</div>
    </div>
  `;
}

/* ======================
   LISTA BUDYNKÃ“W
====================== */
function showBuildings(){
  content.innerHTML = `
    <h2>Lista budynkÃ³w</h2>
    ${buildings.map(b=>`
      <div class="card">
        <strong>${b.adres}</strong><br>
        ZarzÄ…dca: ${b.zarzadca}
      </div>
    `).join("")}
    <button class="btn btn-back" onclick="showHome()">â† WrÃ³Ä‡</button>
  `;
}

/* ======================
   NOWY PRZEGLÄ„D (START)
====================== */
function newInspection(){
  content.innerHTML = `
    <h2>Nowy przeglÄ…d budowlany</h2>

    <label>Wybierz budynek:</label><br>
    <select id="buildingSelect">
      ${buildings.map(b=>`
        <option value="${b.id}">${b.adres}</option>
      `).join("")}
    </select>

    <p><b>Stan ogÃ³lny:</b></p>
    <select id="stan">
      <option>dobry</option>
      <option selected>zadowalajÄ…cy</option>
      <option>Å›redni</option>
      <option>zÅ‚y</option>
    </select>

    <p><b>Uwagi:</b></p>
    <textarea id="uwagi" style="width:100%;height:80px"></textarea>

    <br>
    <button class="btn btn-main" onclick="saveInspection()">Zapisz przeglÄ…d</button>
    <button class="btn btn-back" onclick="showHome()">â† Anuluj</button>
  `;
}

/* ======================
   ZAPIS PRZEGLÄ„DU
====================== */
function saveInspection(){
  const id = document.getElementById("buildingSelect").value;
  const stan = document.getElementById("stan").value;
  const uwagi = document.getElementById("uwagi").value || "Brak zaleceÅ„";

  const building = buildings.find(b=>b.id==id);
  building.historia.push({
    data: new Date().toLocaleDateString(),
    stan,
    uwagi
  });

  saveData();
  alert("PrzeglÄ…d zapisany");
  showHome();
}

/* START */
showHome();
</script>

</body>
</html>
