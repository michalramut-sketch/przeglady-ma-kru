<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nowy PrzeglÄ…d</title>
<style>
body{font-family:Arial;margin:0;background:#f1f5f9}
header{background:#0f172a;color:white;padding:15px;text-align:center;font-size:18px}
.container{padding:15px}
select,input,textarea{width:100%;padding:8px;margin:5px 0 10px;border-radius:6px;border:1px solid #ccc}
.section{background:white;margin:10px 0;padding:12px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.06)}
.element{padding:8px 0;border-bottom:1px solid #eee}
.states button,.grades button{margin:2px;padding:5px 8px;border-radius:6px;border:none;cursor:pointer}
.states button{background:#e2e8f0}
.states button.active{background:#22c55e;color:white}
.grades button{background:#e5e7eb}
.grades button.active{background:#ef4444;color:white}
.save{background:#16a34a;color:white;padding:12px;border:none;border-radius:8px;width:100%;font-size:16px;margin-top:10px}
</style>
</head>
<body>

<header>Nowy przeglÄ…d budowlany</header>

<div class="container">

<label>Budynek</label>
<select id="buildingSelect"></select>

<label>ZarzÄ…dca</label>
<input type="text" id="manager" readonly>

<div class="section">
<h3>Stan techniczny elementÃ³w</h3>

<div id="elements"></div>

</div>

<button class="save" onclick="saveInspection()">ğŸ’¾ Zapisz przeglÄ…d</button>

</div>

<script>
// PRZYKÅADOWA BAZA
const buildings = [
  {id:1,name:"Armii Krajowej 2",manager:"TBS"},
  {id:2,name:"KoÅ›ciuszki 10",manager:"WspÃ³lnota"}
];

const elementList = [
"Åšciany zewnÄ™trzne",
"Dach",
"Stropy",
"Balkony",
"Klatki schodowe",
"Instalacja gazowa",
"Instalacja elektryczna"
];

// WYPEÅNIANIE LISTY BUDYNKÃ“W
const select = document.getElementById("buildingSelect");
buildings.forEach(b=>{
  const opt=document.createElement("option");
  opt.value=b.id;
  opt.textContent=b.name;
  select.appendChild(opt);
});
select.onchange=()=>{
  const b=buildings.find(x=>x.id==select.value);
  document.getElementById("manager").value=b.manager;
};
select.dispatchEvent(new Event('change'));

// GENEROWANIE ELEMENTÃ“W
const elDiv=document.getElementById("elements");
elementList.forEach((name,i)=>{
  const div=document.createElement("div");
  div.className="element";
  div.innerHTML=`
  <strong>${name}</strong>
  <div class="states">
    Stan:
    ${["dobry","zadowalajÄ…cy","Å›redni","zÅ‚y"].map(s=>`<button onclick="setState(this)">${s}</button>`).join("")}
  </div>
  <div class="grades">
    StopieÅ„:
    ${["I","II","III","IV"].map(g=>`<button onclick="toggleGrade(this)">${g}</button>`).join("")}
  </div>
  <textarea placeholder="Uwagi..."></textarea>
  `;
  elDiv.appendChild(div);
});

// STANY
function setState(btn){
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

// STOPNIE
function toggleGrade(btn){
  btn.classList.toggle("active");
}

// ZAPIS
function saveInspection(){
  const data={
    date:new Date().toLocaleDateString(),
    building:select.options[select.selectedIndex].text,
    manager:document.getElementById("manager").value,
    elements:[]
  };

  document.querySelectorAll(".element").forEach(el=>{
    const name=el.querySelector("strong").innerText;
    const state=el.querySelector(".states .active")?.innerText||"zadowalajÄ…cy";
    const grades=[...el.querySelectorAll(".grades .active")].map(b=>b.innerText);
    const notes=el.querySelector("textarea").value;
    data.elements.push({name,state,grades,notes});
  });

  let history=JSON.parse(localStorage.getItem("inspections")||"[]");
  history.push(data);
  localStorage.setItem("inspections",JSON.stringify(history));

  alert("Zapisano przeglÄ…d!");
}
</script>

</body>
</html>}
.card:hover{ transform:scale(1.05); }
.icon{ font-size:34px; display:block; margin-bottom:8px; }
footer{
  text-align:center;
  font-size:12px;
  color:#666;
  padding:15px;
}
</style>
</head>
<body>

<header>MA-KRU â€“ SYSTEM PRZEGLÄ„DÃ“W</header>

<div class="grid">

  <div class="card" onclick="go('przeglad.html')">
    <span class="icon">ğŸ§±</span>
    Nowy przeglÄ…d
  </div>

  <div class="card" onclick="go('historia.html')">
    <span class="icon">ğŸ“‹</span>
    Historia przeglÄ…dÃ³w
  </div>

  <div class="card" onclick="go('budynki.html')">
    <span class="icon">ğŸ¢</span>
    Baza budynkÃ³w
  </div>

  <div class="card" onclick="go('import_export.html')">
    <span class="icon">ğŸ“‚</span>
    Import / Eksport Excel
  </div>

  <div class="card" onclick="go('wnioski.html')">
    <span class="icon">âš ï¸</span>
    Wykaz nieprawidÅ‚owoÅ›ci
  </div>

  <div class="card" onclick="go('ustawienia.html')">
    <span class="icon">âš™ï¸</span>
    Ustawienia i zdjÄ™cia
  </div>

</div>

<footer>
System offline â€¢ Dane zapisujÄ… siÄ™ w tej przeglÄ…darce
</footer>

<script>
function go(page){
  window.location.href = page;
}
</script>

</body>
</html>"Klatki schodowe","Balustrady","Piwnice","Strych","Izolacje",
"Stolarka okienna","Stolarka drzwiowa","Posadzki","Schody",
"Rynny","ObrÃ³bki","Wentylacja","Wodna","Kanalizacja",
"CO","CiepÅ‚a woda","Piony","Techniczne","Estetyka",
"Otoczenie","Drogi","Place","ZieleÅ„","Ogrodzenie",
"MaÅ‚a architektura","BezpieczeÅ„stwo","Inne"
];

function home(){
 var c=document.getElementById("content");
 c.innerHTML="";
 var b=document.createElement("button");
 b.innerText="Nowy przeglÄ…d";
 b.onclick=newInspection;
 c.appendChild(b);
}

function newInspection(){
 var c=document.getElementById("content");
 c.innerHTML="<h2>Nowy przeglÄ…d</h2>";

 var sel=document.createElement("select");
 sel.id="building";
 buildings.forEach(function(b){
  var o=document.createElement("option");
  o.value=b.id;
  o.innerText=b.adres;
  sel.appendChild(o);
 });
 c.appendChild(sel);

 for(var i=0;i<elements.length;i++){
  if(i%5===0){
   var s=document.createElement("div");
   s.className="section";
   s.innerText="Sekcja "+(Math.floor(i/5)+1);
   c.appendChild(s);
  }

  var it=document.createElement("div");
  it.className="item";
  it.innerHTML=
   "<b>"+elements[i]+"</b>"+
   "<select id='s"+i+"'>"+
   "<option>dobry</option>"+
   "<option selected>zadowalajÄ…cy</option>"+
   "<option>Å›redni</option>"+
   "<option>zÅ‚y</option>"+
   "</select>"+
   "<select id='p"+i+"'>"+
   "<option value=''>â€“ pilnoÅ›Ä‡ â€“</option>"+
   "<option>I</option><option>II</option><option>III</option><option>IV</option>"+
   "</select>"+
   "<textarea id='u"+i+"' placeholder='Uwagi'></textarea>";
  c.appendChild(it);
 }

 var save=document.createElement("button");
 save.innerText="Zapisz";
 save.onclick=saveInspection;
 c.appendChild(save);
}

function saveInspection(){
 alert("Zapis OK (logika dziaÅ‚a)");
 home();
}

home();
</script>
</body>
</html>];
function saveData(){localStorage.setItem("buildings",JSON.stringify(buildings));}

const elements = [
 "Fundamenty","Åšciany noÅ›ne","Stropy","Dach","Elewacja",
 "Klatki schodowe","Balustrady","Piwnice","Strych","Izolacje",
 "Stolarka okienna","Stolarka drzwiowa","Posadzki","Schody",
 "Rynny i rury","ObrÃ³bki blacharskie","Wentylacja grawitacyjna",
 "Instalacja wodna","Instalacja kanalizacyjna",
 "Instalacja CO","CiepÅ‚a woda","Piony instalacyjne",
 "Pomieszczenia techniczne","Estetyka budynku",
 "Estetyka otoczenia","Drogi i dojÅ›cia","Place",
 "ZieleÅ„","Ogrodzenie","MaÅ‚a architektura",
 "BezpieczeÅ„stwo","Inne"
];

function showHome(){
 content.innerHTML=`
  <div class="tiles">
   <div class="tile" onclick="showBuildings()">ğŸ¢ Budynki</div>
   <div class="tile" onclick="newInspection()">ğŸ—ï¸ PrzeglÄ…d budowlany</div>
  </div>`;
}

function showBuildings(){
 content.innerHTML=`<h2>Budynki</h2>`+
 buildings.map(b=>`
  <div class="card">
   <b>${b.adres}</b><br>ZarzÄ…dca: ${b.zarzadca}<br>
   PrzeglÄ…dÃ³w: ${b.historia.length}
  </div>`).join("")+
 `<button class="btn btn-back" onclick="showHome()">â† WrÃ³Ä‡</button>`;
}

function newInspection(){
 content.innerHTML=`
 <h2>Nowy przeglÄ…d budowlany</h2>
 <label>Budynek:</label>
 <select id="buildingSelect">
 ${buildings.map(b=>`<option value="${b.id}">${b.adres}</option>`).join("")}
 </select>

 ${renderForm()}

 <button class="btn btn-main" onclick="saveInspection()">Zapisz przeglÄ…d</button>
 <button class="btn btn-back" onclick="showHome()">â† Anuluj</button>
 `;
}

function renderForm(){
 let html="";
 let i=0;
 elements.forEach(el=>{
  if(i%5===0) html+=`<div class="section">Sekcja ${Math.floor(i/5)+1}</div>`;
  html+=`
  <div class="item">
   <b>${el}</b>
   <select id="stan_${i}">
    <option>dobry</option>
    <option selected>zadowalajÄ…cy</option>
    <option>Å›redni</option>
    <option>zÅ‚y</option>
   </select>
   <select id="pilnosc_${i}">
    <option value="">â€“ stopieÅ„ pilnoÅ›ci â€“</option>
    <option>I</option><option>II</option><option>III</option><option>IV</option>
   </select>
   <textarea id="uwagi_${i}" placeholder="Uwagi"></textarea>
  </div>`;
  i++;
 });
 return html;
}

function saveInspection(){
 const id=document.getElementById("buildingSelect").value;
 const b=buildings.find(x=>x.id==id);

 let pozycje=[];
 elements.forEach((el,i)=>{
  pozycje.push({
   element:el,
   stan:document.getElementById("stan_"+i).value,
   pilnosc:document.getElementById("pilnosc_"+i).value,
   uwagi:document.getElementById("uwagi_"+i).value||"brak"
  });
 });

 b.historia.push({
  data:new Date().toLocaleDateString(),
  pozycje
 });

 saveData();
 alert("PrzeglÄ…d zapisany");
 showHome();
}

showHome();
</script>
</body>
</html>];
function saveData(){localStorage.setItem("buildings",JSON.stringify(buildings));}

const elements = [
 "Fundamenty","Åšciany noÅ›ne","Stropy","Dach","Elewacja",
 "Klatki schodowe","Balustrady","Piwnice","Strych","Izolacje",
 "Stolarka okienna","Stolarka drzwiowa","Posadzki","Schody",
 "Rynny i rury","ObrÃ³bki blacharskie","Wentylacja grawitacyjna",
 "Instalacja wodna","Instalacja kanalizacyjna",
 "Instalacja CO","CiepÅ‚a woda","Piony instalacyjne",
 "Pomieszczenia techniczne","Estetyka budynku",
 "Estetyka otoczenia","Drogi i dojÅ›cia","Place",
 "ZieleÅ„","Ogrodzenie","MaÅ‚a architektura",
 "BezpieczeÅ„stwo","Inne"
];

function showHome(){
 content.innerHTML=`
  <div class="tiles">
   <div class="tile" onclick="showBuildings()">ğŸ¢ Budynki</div>
   <div class="tile" onclick="newInspection()">ğŸ—ï¸ PrzeglÄ…d budowlany</div>
  </div>`;
}

function showBuildings(){
 content.innerHTML=`<h2>Budynki</h2>`+
 buildings.map(b=>`
  <div class="card">
   <b>${b.adres}</b><br>ZarzÄ…dca: ${b.zarzadca}<br>
   PrzeglÄ…dÃ³w: ${b.historia.length}
  </div>`).join("")+
 `<button class="btn btn-back" onclick="showHome()">â† WrÃ³Ä‡</button>`;
}

function newInspection(){
 content.innerHTML=`
 <h2>Nowy przeglÄ…d budowlany</h2>
 <label>Budynek:</label>
 <select id="buildingSelect">
 ${buildings.map(b=>`<option value="${b.id}">${b.adres}</option>`).join("")}
 </select>

 ${renderForm()}

 <button class="btn btn-main" onclick="saveInspection()">Zapisz przeglÄ…d</button>
 <button class="btn btn-back" onclick="showHome()">â† Anuluj</button>
 `;
}

function renderForm(){
 let html="";
 let i=0;
 elements.forEach(el=>{
  if(i%5===0) html+=`<div class="section">Sekcja ${Math.floor(i/5)+1}</div>`;
  html+=`
  <div class="item">
   <b>${el}</b>
   <select id="stan_${i}">
    <option>dobry</option>
    <option selected>zadowalajÄ…cy</option>
    <option>Å›redni</option>
    <option>zÅ‚y</option>
   </select>
   <select id="pilnosc_${i}">
    <option value="">â€“ stopieÅ„ pilnoÅ›ci â€“</option>
    <option>I</option><option>II</option><option>III</option><option>IV</option>
   </select>
   <textarea id="uwagi_${i}" placeholder="Uwagi"></textarea>
  </div>`;
  i++;
 });
 return html;
}

function saveInspection(){
 const id=document.getElementById("buildingSelect").value;
 const b=buildings.find(x=>x.id==id);

 let pozycje=[];
 elements.forEach((el,i)=>{
  pozycje.push({
   element:el,
   stan:document.getElementById("stan_"+i).value,
   pilnosc:document.getElementById("pilnosc_"+i).value,
   uwagi:document.getElementById("uwagi_"+i).value||"brak"
  });
 });

 b.historia.push({
  data:new Date().toLocaleDateString(),
  pozycje
 });

 saveData();
 alert("PrzeglÄ…d zapisany");
 showHome();
}

showHome();
</script>
</body>
</html>];
function saveData(){localStorage.setItem("buildings",JSON.stringify(buildings));}

const elements = [
 "Fundamenty","Åšciany noÅ›ne","Stropy","Dach","Elewacja",
 "Klatki schodowe","Balustrady","Piwnice","Strych","Izolacje",
 "Stolarka okienna","Stolarka drzwiowa","Posadzki","Schody",
 "Rynny i rury","ObrÃ³bki blacharskie","Wentylacja grawitacyjna",
 "Instalacja wodna","Instalacja kanalizacyjna",
 "Instalacja CO","CiepÅ‚a woda","Piony instalacyjne",
 "Pomieszczenia techniczne","Estetyka budynku",
 "Estetyka otoczenia","Drogi i dojÅ›cia","Place",
 "ZieleÅ„","Ogrodzenie","MaÅ‚a architektura",
 "BezpieczeÅ„stwo","Inne"
];

function showHome(){
 content.innerHTML=`
  <div class="tiles">
   <div class="tile" onclick="showBuildings()">ğŸ¢ Budynki</div>
   <div class="tile" onclick="newInspection()">ğŸ—ï¸ PrzeglÄ…d budowlany</div>
  </div>`;
}

function showBuildings(){
 content.innerHTML=`<h2>Budynki</h2>`+
 buildings.map(b=>`
  <div class="card">
   <b>${b.adres}</b><br>ZarzÄ…dca: ${b.zarzadca}<br>
   PrzeglÄ…dÃ³w: ${b.historia.length}
  </div>`).join("")+
 `<button class="btn btn-back" onclick="showHome()">â† WrÃ³Ä‡</button>`;
}

function newInspection(){
 content.innerHTML=`
 <h2>Nowy przeglÄ…d budowlany</h2>
 <label>Budynek:</label>
 <select id="buildingSelect">
 ${buildings.map(b=>`<option value="${b.id}">${b.adres}</option>`).join("")}
 </select>

 ${renderForm()}

 <button class="btn btn-main" onclick="saveInspection()">Zapisz przeglÄ…d</button>
 <button class="btn btn-back" onclick="showHome()">â† Anuluj</button>
 `;
}

function renderForm(){
 let html="";
 let i=0;
 elements.forEach(el=>{
  if(i%5===0) html+=`<div class="section">Sekcja ${Math.floor(i/5)+1}</div>`;
  html+=`
  <div class="item">
   <b>${el}</b>
   <select id="stan_${i}">
    <option>dobry</option>
    <option selected>zadowalajÄ…cy</option>
    <option>Å›redni</option>
    <option>zÅ‚y</option>
   </select>
   <select id="pilnosc_${i}">
    <option value="">â€“ stopieÅ„ pilnoÅ›ci â€“</option>
    <option>I</option><option>II</option><option>III</option><option>IV</option>
   </select>
   <textarea id="uwagi_${i}" placeholder="Uwagi"></textarea>
  </div>`;
  i++;
 });
 return html;
}

function saveInspection(){
 const id=document.getElementById("buildingSelect").value;
 const b=buildings.find(x=>x.id==id);

 let pozycje=[];
 elements.forEach((el,i)=>{
  pozycje.push({
   element:el,
   stan:document.getElementById("stan_"+i).value,
   pilnosc:document.getElementById("pilnosc_"+i).value,
   uwagi:document.getElementById("uwagi_"+i).value||"brak"
  });
 });

 b.historia.push({
  data:new Date().toLocaleDateString(),
  pozycje
 });

 saveData();
 alert("PrzeglÄ…d zapisany");
 showHome();
}

showHome();
</script>
</body>
</html>  box-shadow:0 2px 5px rgba(0,0,0,.1);
  cursor:pointer;
}
.tile:hover{
  background:#e5e7eb;
}

/* lista */
.card{
  background:#fff;
  padding:12px;
  border-radius:8px;
  margin-bottom:10px;
  box-shadow:0 1px 3px rgba(0,0,0,.1);
}
.btn{
  margin-top:10px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.btn-main{ background:#2563eb;color:#fff;}
.btn-back{ background:#9ca3af;color:#fff;}
</style>
</head>

<body>

<header>MA-KRU â€“ PrzeglÄ…dy techniczne</header>
<div id="content"></div>

<script>
/* ======================
   BAZA (LOCAL STORAGE)
====================== */
let buildings = JSON.parse(localStorage.getItem("buildings")) || [
  {id:1, adres:"Armii Krajowej 2", zarzadca:"TBS", historia:[]},
  {id:2, adres:"KoÅ›ciuszki 10", zarzadca:"WspÃ³lnota", historia:[]}
];

function saveData(){
  localStorage.setItem("buildings", JSON.stringify(buildings));
}

/* ======================
   PANEL GÅÃ“WNY
====================== */
function showHome(){
  content.innerHTML = `
    <div class="tiles">
      <div class="tile" onclick="showBuildings()">ğŸ¢ Budynki</div>
      <div class="tile" onclick="newInspection()">ğŸ—ï¸ PrzeglÄ…d budowlany</div>
      <div class="tile">ğŸ”¥ Gazowy (wkrÃ³tce)</div>
      <div class="tile">âš¡ Elektryczny (wkrÃ³tce)</div>
      <div class="tile">âš™ï¸ Inne</div>
    </div>
  `;
}

/* ======================
   LISTA BUDYNKÃ“W
====================== */
function showBuildings(){
  content.innerHTML = `
    <h2>Lista budynkÃ³w</h2>
    ${buildings.map(b=>`
      <div class="card">
        <strong>${b.adres}</strong><br>
        ZarzÄ…dca: ${b.zarzadca}
      </div>
    `).join("")}
    <button class="btn btn-back" onclick="showHome()">â† WrÃ³Ä‡</button>
  `;
}

/* ======================
   NOWY PRZEGLÄ„D (START)
====================== */
function newInspection(){
  content.innerHTML = `
    <h2>Nowy przeglÄ…d budowlany</h2>

    <label>Wybierz budynek:</label><br>
    <select id="buildingSelect">
      ${buildings.map(b=>`
        <option value="${b.id}">${b.adres}</option>
      `).join("")}
    </select>

    <p><b>Stan ogÃ³lny:</b></p>
    <select id="stan">
      <option>dobry</option>
      <option selected>zadowalajÄ…cy</option>
      <option>Å›redni</option>
      <option>zÅ‚y</option>
    </select>

    <p><b>Uwagi:</b></p>
    <textarea id="uwagi" style="width:100%;height:80px"></textarea>

    <br>
    <button class="btn btn-main" onclick="saveInspection()">Zapisz przeglÄ…d</button>
    <button class="btn btn-back" onclick="showHome()">â† Anuluj</button>
  `;
}

/* ======================
   ZAPIS PRZEGLÄ„DU
====================== */
function saveInspection(){
  const id = document.getElementById("buildingSelect").value;
  const stan = document.getElementById("stan").value;
  const uwagi = document.getElementById("uwagi").value || "Brak zaleceÅ„";

  const building = buildings.find(b=>b.id==id);
  building.historia.push({
    data: new Date().toLocaleDateString(),
    stan,
    uwagi
  });

  saveData();
  alert("PrzeglÄ…d zapisany");
  showHome();
}

/* START */
showHome();
</script>

</body>
</html>
